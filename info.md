Наблюдения:
- Отсечение по фрустуму фактически выключено (`src/entity/player.cpp:58` возвращает `true`), поэтому `World::prepare_rendering` гоняет через сортировку и рисует все чанки вне поля зрения — лишние draw calls и CPU на сборку списков.
- В `World::prepare_rendering` сортировка чанков делает `glm::distance` внутри компаратора (два sqrt на сравнение). Микробенч 2000 чанков показал 0.149 мс против 0.067 мс при сортировке по заранее посчитанной длине² (см. ниже) — простая замена убирает ~2.2× лишних операций.
- `Chunk::update_mesh` каждый раз проходит все 512 subchunk (4×4×4 м³) и склеивает их буферы, даже если изменилась пара соседних. Векторные вставки без `reserve` вызывают лишние realocation; плюс `send_mesh_data_to_gpu` делает полное `glBufferData` на сумму opaque+translucent, что переаллоцирует VBO и может блокировать драйвер. Стартовая аллокация VBO в конструкторе — ~7 МБ на чанк (максимум всех блоков) вне зависимости от наполнения.
- Полупрозрачные меши рисуются дважды (`World::draw_translucent`: переключение `glFrontFace` с CW на CCW при включённом cull), тем самым удваивая draw calls/overdraw для стекла/воды. Если нужен двусторонний рендер, дешевле отключить cull на один проход или генерировать двусторонние треугольники.
- Сортировка чанков берёт позицию угла чанка (`Chunk::position`), а не центра — для прозрачного порядка это даёт неточный back-to-front и дополнительный overdraw.

Микробенчмарки:
- Сортировка видимых чанков: `build/perf_bench.exe` (собран `g++ -O2 -std=c++17 -DGLM_ENABLE_EXPERIMENTAL -Iinclude -Iinclude/glm tests/perf_bench.cpp -o build/perf_bench.exe`). Результат: `glm::distance` внутри компаратора — 0.148983 мс (среднее), предвычисленная длина² — 0.0670833 мс.
- Склейка мешей из subchunk: `build/perf_bench.exe` при 32 subchunk по 12k/3k float. Без `reserve` — 1.26463 мс, с предвычисленным суммарным `reserve` — 0.433933 мс (~3× быстрее). Фактический код сейчас использует вариант без `reserve`.

Сделано:
- Включено реальное отсечение по фрустуму + ограничение дальностью, сортировка чанков переведена на длину² и центр чанка (`src/world.cpp`, `src/entity/player.cpp`).
- Склейка мешей теперь предварительно резервирует буферы и пропускает пустые subchunk; `send_mesh_data_to_gpu` переиспользует VBO при неизменном размере, конструктор чанка не аллоцирует сразу максимальный объём (`src/chunk/chunk.cpp/h`).
- Полупрозрачные меши рисуются в один проход без переключения `FrontFace`, `cull` отключается только для прозрачного прохода (`src/world.cpp`).
- Сборка переведена на Release/LTO по умолчанию (`CMakeLists.txt`, `compile.bat`) с отключенными тестами/доками GLFW.
- Добавлен дополнительный бенчмаркинг горячих путей (`tests/perf_hotspots.cpp`, таргет `mc_bench`).

Доп. бенчмарки (build/mc_bench.exe):
- `set_block` (500 раз поставить/убрать): обычный блок — ~297 мс суммарно; блок-светильник — ~2353 мс. Разница ~8× показывает, что освещение и очереди распространения — главный горячий путь при модификации блоков.
- Ребилд меша чанка: плотный чанк — ~100.45 мс за пересборку, разреженный — ~3.21 мс. Мешинг плотных областей остаётся дорогим; дальнейшая оптимизация — агрессивное объединение граней (greedy meshing), лимит частоты ребилдов и денормализация/кэширование видимых граней.
